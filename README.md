# Description
n_m3u8dl-re-streamer is a simple container that allows you to directly restream a live stream grabbed with n_m3u8dl-re without generating huge stream files.

It creates a simple HTTP server with python, and serve the .m3u8 file that's generated by ffmpeg.

The big advantage of the container is that it does not create huge file that record the stream.

# Usage

There are 7 env vars you can customize to make it work.

| Variable                      | Requiered | Description                              | Default | Example                                                                            |
| ----------------------------- | ----------|---------------------------------------- | ---------|---------------------------------------------------------------------------------- |
| `STREAM_FILE`                 | Yes | Name of the file that will be generated by ffmpeg.| | `output.m3u8` |
| `N_M3U8DL_RE_PARAMS`          | Yes | All your params to pass to the N_m3u8DL-RE executable to get your stream, which are appended with `--live-real-time-merge --live-pipe-mux --live-keep-segments false --live-wait-time $N_M3U8DL_RE_LIVE_WAIT_TIME --live-take-count $N_M3U8DL_RE_LIVE_TAKE_COUNT`. | | `<mpd url> -H "some: header" --key <yourkey> -sv best -sa best --use-shaka-packager"` |
| `RE_LIVE_PIPE_OPTIONS`        | No | All your params to pass to ffmpeg, which are appended with `-f hls -hls_time $FFMPEG_HLS_TIME -hls_list_size $FFMPEG_HLS_LIST_SIZE -hls_flags delete_segments /app/live/$STREAM_FILE`. | `-c copy` | |
| `N_M3U8DL_RE_LIVE_WAIT_TIME`  | No | `--live-wait-time` param from N_m3u8DL-RE | `5` | |
| `N_M3U8DL_RE_LIVE_TAKE_COUNT` | No | `--live-take-count` param from N_m3u8DL-RE | `5` | |
| `FFMPEG_HLS_TIME`             | No | `--hls_time` param from ffmpeg | `2` | |
| `FFMPEG_HLS_LIST_SIZE`        | No | `--hls-list-size` param from ffmpeg | `3` | |
